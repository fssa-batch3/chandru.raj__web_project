<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../assets/css/login.css" />
  </head>
  <body>
    <body>
      <!-- this page is represented by the logi page -->
      <div class="all">
        <div class="main">
          <div class="all-1">
            <!-- to show logo -->
            <div class="logo">
              <img
                class="photo"
                src="../assets/images/Redefine-removebg-preview.png"
                alt="image"
              />
            </div>
            <!-- to represent logi page -->
            <form class="para">
              <div>
                <h1>Login Here</h1>
              </div>

              <div class="email">
                <p>Email address</p>
                <input
                  type="email"
                  id="email"
                  class="test"
                  placeholder="email"
                  autocomplete="gghgjhfv"
                  required
                />
              </div>
              <div class="password">
                <p>Enter-password</p>
                <input
                  type="password"
                  id="password"
                  placeholder="password"
                  autocomplete="gghgjhfv"
                  <!--
                  pattern="[(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$ -->
                ]"
                  required
                  title=" Password required"
                />
              </div>
              <!-- to represent button -->
              <div class="button">
                <button class="btn1">Forgot password?</button>
                <a><button class="btn1" type="submit">login</button></a>
              </div>

          
            </form>
            <div class="sign">
              <a href="../pages/sign-up.html">Don't have an account ?</a>
            </div>
          </div>
        </div>
      </div>
      <script>

        let logForm = document.querySelector(".para")


        logForm.addEventListener("submit", (e)=> {

      
    e.preventDefault()
          const email1 = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          const champ = localStorage.getItem("local");
          const obj = JSON.parse(champ);

          console.log(obj);
          const tofind = obj.find((h) => h["email"] == email1);


          if (tofind !== undefined && tofind !== null) {
            console.log(tofind["pass"]);

            if(tofind["email"] !== email1){
              alert("user not exist")
            }

            else if (tofind["pass"] !== password) {
             return  alert("Password is wrong");
            } 

            else {
              alert("Succesfully loged in");
              localStorage.setItem("details", JSON.stringify(tofind["email"]));
              if (tofind["Catagory"] == "Buyer") {
            location.href = "index.logi.html";}
            if (tofind["Catagory"] == "Sellar") {
            // location.href = "sellar-form.html";
            let check = false
          
          let mail = JSON.parse(localStorage.getItem("local"))
          let get_data = mail.find(function(l){
            let findEmail = l["email"] 
            if(findEmail== email1){
                      check = true
            }
          }) 
          if (check == true) {
            location.href="index2.html"
        
          }
          else{
            location.href = "sellar-form.html";
          }  

          }
          // let mail = JSON.parse(localStorage.getItem("details"));
          // let local = JSON.parse(localStorage.getItem("local"));
          // let get_data = local.find(function (L) {
          //   return L.email == mail;

        
          } 

        
  
        }
      })
         
      </script>
    
  </body>
</html>
